{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[45],{\"1Zr2\":function(n,e,t){\"use strict\";var r=t(\"1OyB\"),a=t(\"vuIU\"),i=t(\"JX7q\"),c=t(\"Ji7U\"),o=t(\"md7G\"),u=t(\"foSv\"),l=t(\"q1tI\"),s=t.n(l),d=t(\"cGyd\"),f=t(\"vbcS\"),b=t(\"2/Fh\"),m=t(\"nOHt\"),v=t.n(m),p=s.a.createElement;function h(n){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=Object(u.a)(n);if(e){var a=Object(u.a)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Object(o.a)(this,t)}}var I=function(n){Object(c.a)(t,n);var e=h(t);function t(n){var a;Object(r.a)(this,t);var c=(a=e.call(this,n)).props.router.query.rentalId;return a.state={rentalId:c,rental:null},a.fariane=[{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rentals/\"}],a.onDelete=a.onDelete.bind(Object(i.a)(a)),a}return Object(a.a)(t,[{key:\"onDelete\",value:function(){window.flash(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\"),this.props.history.push(\"/rentals/list\")}},{key:\"render\",value:function(){var n=this.props.rentalId;return p(f.a,{mutation:d.b,variables:{id:n}},(function(n){return p(\"a\",{style:{margin:3},onClick:function(e){e.preventDefault(),n().then((function(n){1==n.data.deleteRental.statut_code&&(alert(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\"),v.a.push(\"/rentals/list\"))}))},className:\"btn btn-danger btn-sm\"},p(\"i\",{className:\"fa fa-trash\",style:{color:\"white\"}}))}))}}]),t}(s.a.Component);e.a=Object(b.a)(Object(m.withRouter)(I))},Kcl6:function(n,e,t){\"use strict\";t.r(e);var r=t(\"1OyB\"),a=t(\"vuIU\"),i=t(\"JX7q\"),c=t(\"Ji7U\"),o=t(\"md7G\"),u=t(\"foSv\"),l=(t(\"8Kt/\"),t(\"YFqc\")),s=t.n(l),d=t(\"q1tI\"),f=t.n(d),b=t(\"hJmc\"),m=t(\"cGyd\"),v=t(\"vbcS\"),p=t(\"2/Fh\"),h=t(\"MBJH\"),I=t(\"F1wk\"),y=t(\"3Mv1\"),_=(t(\"v8KW\"),t(\"1Zr2\")),O=t(\"wd/R\"),g=t.n(O),j=f.a.createElement;function D(n){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=Object(u.a)(n);if(e){var a=Object(u.a)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Object(o.a)(this,t)}}var w=function(n){Object(c.a)(t,n);var e=D(t);function t(n){var a;return Object(r.a)(this,t),(a=e.call(this,n)).fariane=[{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rental/\"}],a.onDelete=a.onDelete.bind(Object(i.a)(a)),a}return Object(a.a)(t,[{key:\"renderHeader\",value:function(){}},{key:\"header\",value:function(){return console.log(this.props.rental),j(f.a.Fragment,null,j(\"h3\",{className:\"card-title\"},\"Locations\"),j(\"div\",{className:\"card-tools\"},j(s.a,{href:\"/rentals/add\"},j(\"a\",{className:\"btn btn-success btn-xs\"},j(\"i\",{className:\"fa fa-plus\"}),\" Nouvelle location\"))))}},{key:\"onDelete\",value:function(){window.flash(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\")}},{key:\"render\",value:function(){return j(b.a,null,j(I.a,{title:\"Locations\",fariane:this.fariane},j(y.a,{header:this.header()},j(v.b,{query:m.e,pollInterval:3e3},(function(n){var e=n.loading,t=n.error,r=n.data;return e?j(\"div\",null,\"Chargement en cours ...\"):t?(console.log(t),j(\"div\",null,\"Error\")):j(h.a,{striped:!0,bordered:!0,hover:!0,size:\"sm\"},j(\"thead\",null,j(\"tr\",null,j(\"th\",null,\"#ID\"),j(\"th\",null,\"Date de d\\xe9but\"),j(\"th\",null,\"Date de fin\"),j(\"th\",null,\"Client\"),j(\"th\",null,\"V\\xe9hicule\"),j(\"th\",null,\"Actions\"))),j(\"tbody\",null,r.rentals.edges.map((function(n,e){var t=n.node;return j(\"tr\",{key:t.id},j(\"td\",null,t.id),j(\"td\",null,g()(t.date_begin).format(\"DD/MM/YYYY\")),j(\"td\",null,g()(t.date_end).format(\"DD/MM/YYYY\"),\" \"),j(\"td\",null,\" \",t.customer&&t.customer.gender+\" \"+t.customer.lastname+\" \"+t.customer.firstname),j(\"td\",null,t.car.plate_number),j(\"td\",null,j(s.a,{href:\"/rentals/view?rentalId=\"+t.id},j(\"a\",{style:{margin:3},className:\"btn btn-info btn-sm\"},j(\"i\",{className:\"fa fa-eye\"}))),j(s.a,{href:\"/rentals/edit?rentalId=\"+t.id},j(\"a\",{style:{margin:3},className:\"btn btn-success btn-sm\"},j(\"i\",{className:\"fa fa-pen-alt\"}))),j(_.a,{rentalId:t.id})))}))))})))))}}]),t}(f.a.Component);e.default=Object(p.a)(w,!0)},MBJH:function(n,e,t){\"use strict\";var r=t(\"wx14\"),a=t(\"zLVn\"),i=t(\"TSYQ\"),c=t.n(i),o=t(\"q1tI\"),u=t.n(o),l=t(\"vUet\"),s=u.a.forwardRef((function(n,e){var t=n.bsPrefix,i=n.className,o=n.striped,s=n.bordered,d=n.borderless,f=n.hover,b=n.size,m=n.variant,v=n.responsive,p=Object(a.a)(n,[\"bsPrefix\",\"className\",\"striped\",\"bordered\",\"borderless\",\"hover\",\"size\",\"variant\",\"responsive\"]),h=Object(l.a)(t,\"table\"),I=c()(i,h,m&&h+\"-\"+m,b&&h+\"-\"+b,o&&h+\"-striped\",s&&h+\"-bordered\",d&&h+\"-borderless\",f&&h+\"-hover\"),y=u.a.createElement(\"table\",Object(r.a)({},p,{className:I,ref:e}));if(v){var _=h+\"-responsive\";return\"string\"===typeof v&&(_=_+\"-\"+v),u.a.createElement(\"div\",{className:_},y)}return y}));e.a=s},bmvG:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/rentals/list\",function(){return t(\"Kcl6\")}])},cGyd:function(n,e,t){\"use strict\";t.d(e,\"e\",(function(){return f})),t.d(e,\"c\",(function(){return b})),t.d(e,\"d\",(function(){return m})),t.d(e,\"f\",(function(){return v})),t.d(e,\"a\",(function(){return p})),t.d(e,\"b\",(function(){return h}));var r=t(\"h4VS\"),a=t(\"lTCR\"),i=t.n(a);function c(){var n=Object(r.a)([\"\\n  mutation delete_rental($id: ID!)  {\\n    deleteRental(id:$id){\\n        statut_code\\n        message\\n    }\\n  }\\n\\n\"]);return c=function(){return n},n}function o(){var n=Object(r.a)([\"\\n  mutation update_rental($data:RentalInput!)  {\\n    createRental(data:$data){\\n        id\\n    }\\n  }\\n\\n\"]);return o=function(){return n},n}function u(){var n=Object(r.a)([\"\\n  mutation update_rental($id: ID!, $data:RentalInput!)  {\\n    updateRental(id:$id,data:$data){\\n      id\\n      bookingId\\n      carId\\n      customerId\\n      second_driverId\\n      date_begin\\n      date_end\\n    }\\n  }\\n\\n\"]);return u=function(){return n},n}function l(){var n=Object(r.a)([\"\\nquery get_rental($rentalId:ID!){\\n  rental(id:$rentalId){\\n    id\\n    bookingId\\n    carId\\n    customerId\\n    second_driverId\\n    date_begin\\n    date_end\\n  }\\n}\\n\"]);return l=function(){return n},n}function s(){var n=Object(r.a)([\"\\nquery get_rental($rentalId:ID!){\\n  rental(id:$rentalId){\\n    id\\n    bookingId\\n    carId\\n    customerId\\n    second_driverId\\n    date_begin\\n    date_end\\n    customer{\\n      id\\n      firstname\\n      lastname\\n      gender\\n      cni\\n      phone\\n      email\\n      address\\n      city\\n    }\\n    car{\\n      id\\n      plate_number\\n      model\\n      model_date\\n      price\\n      chassis_number\\n      category{\\n        id\\n        title\\n      }\\n      brand{\\n        id\\n        name\\n      }\\n      color{\\n        id\\n        name\\n      }\\n    }\\n  }\\n}\\n\"]);return s=function(){return n},n}function d(){var n=Object(r.a)([\"\\n{\\n  rentals {\\n    edges{\\n        node{\\n            id\\n            bookingId\\n            carId\\n            customerId\\n            second_driverId\\n            date_begin\\n            date_end\\n            customer{\\n              id\\n              firstname\\n              lastname\\n              gender\\n            }\\n            car{\\n              id\\n              plate_number\\n            }\\n\\n        }\\n    }\\n  }\\n}\\n\"]);return d=function(){return n},n}var f=i()(d()),b=i()(s()),m=i()(l()),v=i()(u()),p=i()(o()),h=i()(c())},v8KW:function(n,e,t){\"use strict\";t(\"wx14\"),t(\"o0o1\"),t(\"rePB\"),t(\"HaE+\"),t(\"1OyB\"),t(\"vuIU\"),t(\"Ji7U\"),t(\"md7G\"),t(\"foSv\");var r=t(\"q1tI\"),a=t.n(r);t(\"nOHt\"),t(\"E/DK\"),a.a.createElement}},[[\"bmvG\",0,2,7,1,3,4,5,8]]]);","extractedComments":[]}
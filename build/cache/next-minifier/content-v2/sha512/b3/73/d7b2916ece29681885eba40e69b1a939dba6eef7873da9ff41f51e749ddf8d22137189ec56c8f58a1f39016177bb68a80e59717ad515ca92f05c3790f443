{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[46],{\"1Zr2\":function(t,e,n){\"use strict\";var r=n(\"1OyB\"),a=n(\"vuIU\"),l=n(\"JX7q\"),c=n(\"Ji7U\"),u=n(\"md7G\"),i=n(\"foSv\"),o=n(\"q1tI\"),s=n.n(o),d=n(\"cGyd\"),f=n(\"vbcS\"),h=n(\"2/Fh\"),b=n(\"nOHt\"),m=n.n(b),p=s.a.createElement;function v(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(i.a)(t);if(e){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var y=function(t){Object(c.a)(n,t);var e=v(n);function n(t){var a;Object(r.a)(this,n);var c=(a=e.call(this,t)).props.router.query.rentalId;return a.state={rentalId:c,rental:null},a.fariane=[{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rentals/\"}],a.onDelete=a.onDelete.bind(Object(l.a)(a)),a}return Object(a.a)(n,[{key:\"onDelete\",value:function(){window.flash(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\"),this.props.history.push(\"/rentals/list\")}},{key:\"render\",value:function(){var t=this.props.rentalId;return p(f.a,{mutation:d.b,variables:{id:t}},(function(t){return p(\"a\",{style:{margin:3},onClick:function(e){e.preventDefault(),t().then((function(t){1==t.data.deleteRental.statut_code&&(alert(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\"),m.a.push(\"/rentals/list\"))}))},className:\"btn btn-danger btn-sm\"},p(\"i\",{className:\"fa fa-trash\",style:{color:\"white\"}}))}))}}]),n}(s.a.Component);e.a=Object(h.a)(Object(b.withRouter)(y))},AuDA:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/rentals/view\",function(){return n(\"kq/H\")}])},cGyd:function(t,e,n){\"use strict\";n.d(e,\"e\",(function(){return f})),n.d(e,\"c\",(function(){return h})),n.d(e,\"d\",(function(){return b})),n.d(e,\"f\",(function(){return m})),n.d(e,\"a\",(function(){return p})),n.d(e,\"b\",(function(){return v}));var r=n(\"h4VS\"),a=n(\"lTCR\"),l=n.n(a);function c(){var t=Object(r.a)([\"\\n  mutation delete_rental($id: ID!)  {\\n    deleteRental(id:$id){\\n        statut_code\\n        message\\n    }\\n  }\\n\\n\"]);return c=function(){return t},t}function u(){var t=Object(r.a)([\"\\n  mutation update_rental($data:RentalInput!)  {\\n    createRental(data:$data){\\n        id\\n    }\\n  }\\n\\n\"]);return u=function(){return t},t}function i(){var t=Object(r.a)([\"\\n  mutation update_rental($id: ID!, $data:RentalInput!)  {\\n    updateRental(id:$id,data:$data){\\n      id\\n      bookingId\\n      carId\\n      customerId\\n      second_driverId\\n      date_begin\\n      date_end\\n    }\\n  }\\n\\n\"]);return i=function(){return t},t}function o(){var t=Object(r.a)([\"\\nquery get_rental($rentalId:ID!){\\n  rental(id:$rentalId){\\n    id\\n    bookingId\\n    carId\\n    customerId\\n    second_driverId\\n    date_begin\\n    date_end\\n  }\\n}\\n\"]);return o=function(){return t},t}function s(){var t=Object(r.a)([\"\\nquery get_rental($rentalId:ID!){\\n  rental(id:$rentalId){\\n    id\\n    bookingId\\n    carId\\n    customerId\\n    second_driverId\\n    date_begin\\n    date_end\\n    customer{\\n      id\\n      firstname\\n      lastname\\n      gender\\n      cni\\n      phone\\n      email\\n      address\\n      city\\n    }\\n    car{\\n      id\\n      plate_number\\n      model\\n      model_date\\n      price\\n      chassis_number\\n      category{\\n        id\\n        title\\n      }\\n      brand{\\n        id\\n        name\\n      }\\n      color{\\n        id\\n        name\\n      }\\n    }\\n  }\\n}\\n\"]);return s=function(){return t},t}function d(){var t=Object(r.a)([\"\\n{\\n  rentals {\\n    edges{\\n        node{\\n            id\\n            bookingId\\n            carId\\n            customerId\\n            second_driverId\\n            date_begin\\n            date_end\\n            customer{\\n              id\\n              firstname\\n              lastname\\n              gender\\n            }\\n            car{\\n              id\\n              plate_number\\n            }\\n\\n        }\\n    }\\n  }\\n}\\n\"]);return d=function(){return t},t}var f=l()(d()),h=l()(s()),b=l()(o()),m=l()(i()),p=l()(u()),v=l()(c())},\"kq/H\":function(t,e,n){\"use strict\";n.r(e);var r=n(\"1OyB\"),a=n(\"vuIU\"),l=n(\"JX7q\"),c=n(\"Ji7U\"),u=n(\"md7G\"),i=n(\"foSv\"),o=(n(\"8Kt/\"),n(\"YFqc\")),s=n.n(o),d=n(\"q1tI\"),f=n.n(d),h=n(\"hJmc\"),b=n(\"cGyd\"),m=n(\"vbcS\"),p=n(\"2/Fh\"),v=n(\"Jz+W\"),y=n(\"KD6P\"),O=n(\"F1wk\"),j=n(\"3Mv1\"),I=n(\"nOHt\"),_=n(\"3Z9Z\"),R=n(\"JI6e\"),g=n(\"wd/R\"),w=n.n(g),D=f.a.createElement;function N(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(i.a)(t);if(e){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var k=function(t){Object(c.a)(n,t);var e=N(n);function n(t){return Object(r.a)(this,n),e.call(this,t)}return Object(a.a)(n,[{key:\"render\",value:function(){var t=this.props.rental;return t?D(_.a,{className:\"col-sm-12\"},D(R.a,{className:\"col-sm-6 table-responsive\"},D(\"table\",{className:\"table\"},D(\"tbody\",null,D(\"tr\",null,D(\"th\",{style:{width:\"50%\"}},\"Date de d\\xe9but:\"),D(\"td\",null,w()(t.date_begin).format(\"DD/MM/YYYY\"))),D(\"tr\",null,D(\"th\",{style:{width:\"50%\"}},\"Date de fin:\"),D(\"td\",null,w()(t.date_end).format(\"DD/MM/YYYY\"))))))):null}}]),n}(f.a.Component),q=Object(I.withRouter)(k),C=f.a.createElement;function E(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(i.a)(t);if(e){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var $=function(t){Object(c.a)(n,t);var e=E(n);function n(t){return Object(r.a)(this,n),e.call(this,t)}return Object(a.a)(n,[{key:\"render\",value:function(){var t=this.props.customer;return t?C(_.a,{className:\"col-sm-12\"},C(R.a,{className:\"col-sm-6 table-responsive\"},C(\"table\",{className:\"table\"},C(\"tbody\",null,C(\"tr\",null,C(\"th\",{style:{width:\"50%\"}},\"Nom complet:\"),C(\"td\",null,t.gender,\" \",t.lastname,\" \",t.firstname)),C(\"tr\",null,C(\"th\",{style:{width:\"50%\"}},\"CNI:\"),C(\"td\",null,t.cni)),C(\"tr\",null,C(\"th\",{style:{width:\"50%\"}},\"T\\xe9l\\xe9phone:\"),C(\"td\",null,t.phone)),C(\"tr\",null,C(\"th\",{style:{width:\"50%\"}},\"E-mail:\"),C(\"td\",null,t.email)),C(\"tr\",null,C(\"th\",{style:{width:\"50%\"}},\"Adresse:\"),C(\"td\",null,t.address,C(\"br\",null),\" \",t.city)))))):null}}]),n}(f.a.Component),S=Object(I.withRouter)($),x=f.a.createElement;function J(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(i.a)(t);if(e){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var L=function(t){Object(c.a)(n,t);var e=J(n);function n(t){return Object(r.a)(this,n),e.call(this,t)}return Object(a.a)(n,[{key:\"render\",value:function(){var t=this.props.car;return t?x(_.a,{className:\"col-sm-12\"},x(R.a,{className:\"col-sm-6 table-responsive\"},x(\"table\",{className:\"table\"},x(\"tbody\",null,x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Immatriculation:\"),x(\"td\",null,t.plate_number)),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"La marque:\"),x(\"td\",null,t.brand.name)),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Mod\\xe9le:\"),x(\"td\",null,t.model,\" \",t.model_date)),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Cat\\xe9gorie:\"),x(\"td\",null,t.category.title)),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Prix de location:\"),x(\"td\",null,t.price,\" DHs\")),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Couleur:\"),x(\"td\",null,\"car.color.name\")),x(\"tr\",null,x(\"th\",{style:{width:\"50%\"}},\"Num\\xe9ro de chassis:\"),x(\"td\",null,t.chassis_number)))))):null}}]),n}(f.a.Component),P=Object(I.withRouter)(L),Y=n(\"1Zr2\"),A=f.a.createElement;function K(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(i.a)(t);if(e){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var F=function(t){Object(c.a)(n,t);var e=K(n);function n(t){var a;Object(r.a)(this,n);var c=(a=e.call(this,t)).props.router.query.rentalId;return a.state={rentalId:c},a.fariane=[{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rental/\"}],a.onDelete=a.onDelete.bind(Object(l.a)(a)),a}return Object(a.a)(n,[{key:\"onDelete\",value:function(){window.flash(\"La location a bien \\xe9t\\xe9 supprim\\xe9e.\",\"success\"),this.props.history.push(\"/rentals/\")}},{key:\"header\",value:function(){var t=this.state.rentalId;return A(f.a.Fragment,null,A(\"h3\",{className:\"card-title\"},\"Location #\"+t),A(\"div\",{className:\"card-tools\"},A(s.a,{href:\"/rentals/edit?rentalId=\"+t},A(\"a\",{className:\"btn btn-success btn-sm\",\"data-toggle\":\"tooltip\",title:\"\",\"data-original-title\":\"Nouvelle\"},A(\"i\",{className:\"fa fa-pen-alt\"}),\" Modifier\")),A(Y.a,{rentalId:t})))}},{key:\"render\",value:function(){var t=this.state.rentalId;return A(h.a,null,A(O.a,{title:\"Locations\",fariane:this.fariane},A(j.a,{header:this.header()},A(m.b,{query:b.c,variables:{rentalId:t},pollInterval:3e3},(function(t){var e=t.loading,n=t.error,r=t.data;return e?A(\"div\",null,\"Chargement en cours ...\"):n?(console.log(n),A(\"div\",null,\"Error\")):(console.log(r),r.rental?A(f.a.Fragment,null,A(v.a,{defaultActiveKey:\"rental\",id:\"uncontrolled-tab-example\",style:{backgroundColor:\"#f4f6f9\",margin:\"3px\",paddingBottom:\"2px\"}},A(y.a,{eventKey:\"rental\",title:\"Location\"},A(q,{rental:r.rental})),A(y.a,{eventKey:\"before_rental\",title:\"D\\xe9but de location\"},A(q,{rental:r.rental})),A(y.a,{eventKey:\"after_rental\",title:\"Fin de location\"},A(S,{customer:r.rental.customer})),A(y.a,{eventKey:\"customer\",title:\"Client\"},A(S,{customer:r.rental.customer})),A(y.a,{eventKey:\"car\",title:\"V\\xe9hicule\"},A(P,{car:r.rental.car})))):\"Rental not found\")})))))}}]),n}(f.a.Component);e.default=Object(p.a)(Object(I.withRouter)(F))}},[[\"AuDA\",0,2,7,1,3,4,5,8,12]]]);","extractedComments":[]}
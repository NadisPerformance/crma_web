{"ast":null,"code":"var _jsxFileName = \"/Users/belabed90/Documents/GitHub/crma_web/pages/rentals/list.js\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport React from 'react';\nimport AdminLayout from '../../components/AdminLayout';\nimport { get_rentals } from '../../components/rental/queries';\nimport { Query } from 'react-apollo';\nimport withData from '../../lib/withData';\nimport { Table } from 'react-bootstrap';\nimport Page from '../../components/Page';\nimport Card from '../../components/Card';\nimport withAuth from '../../lib/withAuth';\nimport RentalDeleteButton from '../../components/rental/DeleteButton';\nimport moment from 'moment';\n\nclass List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fariane = [{\n      title: \"Acceuil\",\n      path: \"/\"\n    }, {\n      title: \"Locations\",\n      path: \"/rental/\"\n    }];\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  renderHeader() {}\n\n  header() {\n    console.log(this.props.rental);\n    return __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }\n    }, __jsx(\"h3\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 14\n      }\n    }, \"Locations\"), __jsx(\"div\", {\n      className: \"card-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 15\n      }\n    }, __jsx(Link, {\n      href: \"/rentals/add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 21\n      }\n    }, __jsx(\"a\", {\n      className: \"btn btn-success btn-xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 23\n      }\n    }, __jsx(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 25\n      }\n    }), \" Nouvelle location\"))));\n  }\n\n  onDelete() {\n    window.flash('La location a bien été supprimée.', 'success'); //this.props.history.push(\"/cars/\");\n  }\n\n  render() {\n    return __jsx(AdminLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }\n    }, __jsx(Page, {\n      title: \"Locations\",\n      fariane: this.fariane,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }, __jsx(Card, {\n      header: this.header(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }\n    }, __jsx(Query, {\n      query: get_rentals,\n      pollInterval: 3000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, ({\n      loading,\n      error,\n      data\n    }) => {\n      if (loading) return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 37\n        }\n      }, \"Chargement en cours ...\");\n\n      if (error) {\n        console.log(error);\n        return __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 26\n          }\n        }, \"Error\");\n      }\n\n      return __jsx(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        size: \"sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 22\n        }\n      }, __jsx(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 23\n        }\n      }, __jsx(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }\n      }, __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 27\n        }\n      }, \"#ID\"), __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 27\n        }\n      }, \"Date de d\\xE9but\"), __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 27\n        }\n      }, \"Date de fin\"), __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 27\n        }\n      }, \"Client\"), __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 27\n        }\n      }, \"V\\xE9hicule\"), __jsx(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 27\n        }\n      }, \"Actions\"))), __jsx(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 23\n        }\n      }, data.rentals.edges.map((edge, index) => {\n        let rental = edge.node;\n        return __jsx(\"tr\", {\n          key: rental.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 31\n          }\n        }, __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 33\n          }\n        }, rental.id), __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 33\n          }\n        }, moment(rental.date_begin).format(\"DD/MM/YYYY\")), __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 33\n          }\n        }, moment(rental.date_end).format(\"DD/MM/YYYY\"), \" \"), __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 33\n          }\n        }, \" \", rental.customer && rental.customer.gender + \" \" + rental.customer.lastname + \" \" + rental.customer.firstname), __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 33\n          }\n        }, rental.car.plate_number), __jsx(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 33\n          }\n        }, __jsx(Link, {\n          href: \"/rentals/view?rentalId=\" + rental.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 35\n          }\n        }, __jsx(\"a\", {\n          style: {\n            margin: 3\n          },\n          className: \"btn btn-info btn-sm\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 37\n          }\n        }, __jsx(\"i\", {\n          className: \"fa fa-eye\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 37\n          }\n        }))), __jsx(Link, {\n          href: \"/rentals/edit?rentalId=\" + rental.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 35\n          }\n        }, __jsx(\"a\", {\n          style: {\n            margin: 3\n          },\n          className: \"btn btn-success btn-sm\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 37\n          }\n        }, __jsx(\"i\", {\n          className: \"fa fa-pen-alt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 37\n          }\n        }))), __jsx(RentalDeleteButton, {\n          rentalId: rental.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 35\n          }\n        })));\n      })));\n    }))));\n  }\n\n}\n\nexport default withData(List, true);","map":{"version":3,"sources":["/Users/belabed90/Documents/GitHub/crma_web/pages/rentals/list.js"],"names":["Head","Link","React","AdminLayout","get_rentals","Query","withData","Table","Page","Card","withAuth","RentalDeleteButton","moment","List","Component","constructor","props","fariane","title","path","onDelete","bind","renderHeader","header","console","log","rental","window","flash","render","loading","error","data","rentals","edges","map","edge","index","node","id","date_begin","format","date_end","customer","gender","lastname","firstname","car","plate_number","margin"],"mappings":"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","sourcesContent":["import Head from 'next/head'\nimport Link from 'next/link'\nimport React from 'react'\nimport AdminLayout from '../../components/AdminLayout'\nimport {get_rentals} from '../../components/rental/queries'\nimport { Query } from 'react-apollo'\nimport withData from '../../lib/withData'\nimport {Table} from 'react-bootstrap'\nimport Page from '../../components/Page'\nimport Card from '../../components/Card'\nimport withAuth from '../../lib/withAuth'\nimport RentalDeleteButton from '../../components/rental/DeleteButton'\nimport moment from 'moment'\n\n\nclass List extends React.Component {\n  constructor (props) {\n    super(props)\n    this.fariane= [{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rental/\"}]\n    this.onDelete = this.onDelete.bind(this)\n  }\n  renderHeader(){\n\n  }\n  header(){\n    console.log(this.props.rental)\n    return (<React.Fragment>\n             <h3 className=\"card-title\">Locations</h3>\n              <div className=\"card-tools\">\n                    <Link href=\"/rentals/add\" >\n                      <a className=\"btn btn-success btn-xs\" >\n                        <i className=\"fa fa-plus\"></i> Nouvelle location\n                      </a>\n                    </Link>\n                </div>\n          </React.Fragment>)\n  }\n  onDelete(){\n    window.flash('La location a bien été supprimée.', 'success')\n    //this.props.history.push(\"/cars/\");\n  }\n  render() {\n    return (\n      <AdminLayout>\n        <Page title=\"Locations\" fariane={this.fariane}>\n          <Card header={this.header()} >\n            <Query query={get_rentals} pollInterval={3000} >\n              {({ loading, error, data }) => {\n                if (loading) return <div>Chargement en cours ...</div>\n                if (error) {\n                  console.log(error)\n                  return <div>Error</div>\n                }\n                return (\n                     <Table striped bordered hover size=\"sm\">\n                      <thead>\n                        <tr>\n                          <th>#ID</th>\n                          <th>Date de début</th>\n                          <th>Date de fin</th>\n                          <th>Client</th>\n                          <th>Véhicule</th>\n                          <th>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {\n                          data.rentals.edges.map((edge, index)=>{\n                            let rental = edge.node\n                            return (\n                              <tr key={rental.id}>\n                                <td>{rental.id}</td>\n                                <td>{moment(rental.date_begin).format(\"DD/MM/YYYY\")}</td>\n                                <td>{moment(rental.date_end).format(\"DD/MM/YYYY\")} </td>\n                                <td> {rental.customer && rental.customer.gender + \" \"+rental.customer.lastname+\" \"+rental.customer.firstname}</td>\n                                <td>{rental.car.plate_number}</td>\n                                <td>\n                                  <Link href={\"/rentals/view?rentalId=\"+rental.id} >\n                                    <a style={{margin:3}}\n                                    className=\"btn btn-info btn-sm\" >\n                                    <i className=\"fa fa-eye\"></i>\n                                    </a>\n                                  </Link>\n                                  <Link href={\"/rentals/edit?rentalId=\"+rental.id} >\n                                    <a  style={{margin:3}}\n                                    className=\"btn btn-success btn-sm\" >\n                                    <i className=\"fa fa-pen-alt\"></i>\n                                    </a>\n                                  </Link>\n                                  <RentalDeleteButton rentalId={rental.id} />\n                                </td>\n                              </tr>\n                            )\n                          })\n                        }\n                      </tbody>\n                    </Table>\n                )\n              }}\n              </Query>\n          </Card>\n        </Page>\n      </AdminLayout>\n    )\n  }\n}\n\nexport default withData(List, true)\n"]},"metadata":{},"sourceType":"module"}
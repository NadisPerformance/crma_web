{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/belabed90/Documents/GitHub/crma_web/components/rental/DeleteButton.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { delete_rental } from './queries';\nimport { Mutation } from 'react-apollo';\nimport withData from '../../lib/withData';\nimport { withRouter } from 'next/router';\nimport Router from 'next/router';\n\nvar DeleteButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(DeleteButton, _React$Component);\n\n  var _super = _createSuper(DeleteButton);\n\n  function DeleteButton(props) {\n    var _this;\n\n    _classCallCheck(this, DeleteButton);\n\n    _this = _super.call(this, props);\n    var rentalId = _this.props.router.query.rentalId;\n    _this.state = {\n      rentalId: rentalId,\n      rental: null\n    };\n    _this.fariane = [{\n      title: \"Acceuil\",\n      path: \"/\"\n    }, {\n      title: \"Locations\",\n      path: \"/rentals/\"\n    }];\n    _this.onDelete = _this.onDelete.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DeleteButton, [{\n    key: \"onDelete\",\n    value: function onDelete() {\n      window.flash('La location a bien été supprimée.', 'success');\n      this.props.history.push(\"/rentals/list\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var rentalId = this.props.rentalId;\n      return __jsx(Mutation, {\n        mutation: delete_rental,\n        variables: {\n          id: rentalId\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 7\n        }\n      }, function (postMutation) {\n        return __jsx(\"a\", {\n          style: {\n            margin: 3\n          },\n          onClick: function onClick(event) {\n            event.preventDefault(); //console.log(user)\n\n            postMutation().then(function (result) {\n              //this.props.history.goBack();\n              //console.log(result)\n              if (result.data.deleteRental.statut_code == 1) {\n                alert('La location a bien été supprimée.', 'success');\n                Router.push(\"/rentals/list\");\n              }\n            });\n          },\n          className: \"btn btn-danger btn-sm\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 13\n          }\n        }, __jsx(\"i\", {\n          className: \"fa fa-trash\",\n          style: {\n            color: 'white'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 19\n          }\n        }));\n      });\n    }\n  }]);\n\n  return DeleteButton;\n}(React.Component);\n\nexport default _c2 = withData(_c = withRouter(DeleteButton));\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$withData\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/belabed90/Documents/GitHub/crma_web/components/rental/DeleteButton.js"],"names":["React","delete_rental","Mutation","withData","withRouter","Router","DeleteButton","props","rentalId","router","query","state","rental","fariane","title","path","onDelete","bind","window","flash","history","push","id","postMutation","margin","event","preventDefault","then","result","data","deleteRental","statut_code","alert","color","Component"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA6B,WAA7B;AACA,SAAUC,QAAV,QAA0B,cAA1B;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,MAAP,MAAmB,aAAnB;;IAEMC,Y;;;;;AACJ,wBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB,8BAAMA,KAAN;AADkB,QAEVC,QAFU,GAEG,MAAKD,KAAL,CAAWE,MAAX,CAAkBC,KAFrB,CAEVF,QAFU;AAGlB,UAAKG,KAAL,GAAW;AACTH,MAAAA,QAAQ,EAAEA,QADD;AAETI,MAAAA,MAAM,EAAC;AAFE,KAAX;AAIA,UAAKC,OAAL,GAAc,CAAC;AAACC,MAAAA,KAAK,EAAC,SAAP;AAAiBC,MAAAA,IAAI,EAAC;AAAtB,KAAD,EAA4B;AAACD,MAAAA,KAAK,EAAC,WAAP;AAAmBC,MAAAA,IAAI,EAAC;AAAxB,KAA5B,CAAd;AACA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AARkB;AASnB;;;;+BACS;AACRC,MAAAA,MAAM,CAACC,KAAP,CAAa,mCAAb,EAAkD,SAAlD;AACA,WAAKZ,KAAL,CAAWa,OAAX,CAAmBC,IAAnB,CAAwB,eAAxB;AACD;;;6BACQ;AAAA;;AAAA,UACFb,QADE,GACU,KAAKD,KADf,CACFC,QADE;AAEP,aACE,MAAC,QAAD;AAAU,QAAA,QAAQ,EAAEP,aAApB;AAAmC,QAAA,SAAS,EAAE;AAACqB,UAAAA,EAAE,EAACd;AAAJ,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,UAAAe,YAAY;AAAA,eACX;AAAI,UAAA,KAAK,EAAE;AAACC,YAAAA,MAAM,EAAC;AAAR,WAAX;AACE,UAAA,OAAO,EAAE,iBAACC,KAAD,EAAS;AAChBA,YAAAA,KAAK,CAACC,cAAN,GADgB,CAEhB;;AACAH,YAAAA,YAAY,GAAGI,IAAf,CAAoB,UAACC,MAAD,EAAU;AAC5B;AACA;AACA,kBAAIA,MAAM,CAACC,IAAP,CAAYC,YAAZ,CAAyBC,WAAzB,IAAsC,CAA1C,EAA4C;AACxCC,gBAAAA,KAAK,CAAC,mCAAD,EAAsC,SAAtC,CAAL;AACA3B,gBAAAA,MAAM,CAACgB,IAAP,CAAY,eAAZ;AACH;AACF,aAPD;AAQD,WAZH;AAaM,UAAA,SAAS,EAAC,uBAbhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAcM;AAAG,UAAA,SAAS,EAAC,aAAb;AAA2B,UAAA,KAAK,EAAE;AAACY,YAAAA,KAAK,EAAC;AAAP,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAdN,CADW;AAAA,OADjB,CADF;AAuBD;;;;EAxCwBjC,KAAK,CAACkC,S;;AA2CjC,qBAAe/B,QAAQ,MAACC,UAAU,CAACE,YAAD,CAAX,CAAvB","sourcesContent":["import React from 'react'\nimport { delete_rental} from './queries'\nimport {  Mutation } from 'react-apollo'\nimport withData from '../../lib/withData'\nimport { withRouter } from 'next/router'\nimport Router from 'next/router'\n\nclass DeleteButton extends React.Component {\n  constructor (props) {\n    super(props)\n    const { rentalId } = this.props.router.query\n    this.state={\n      rentalId: rentalId,\n      rental:null\n    }\n    this.fariane= [{title:\"Acceuil\",path:\"/\"},{title:\"Locations\",path:\"/rentals/\"}]\n    this.onDelete = this.onDelete.bind(this)\n  }\n  onDelete(){\n    window.flash('La location a bien été supprimée.', 'success')\n    this.props.history.push(\"/rentals/list\");\n  }\n  render() {\n    let {rentalId} = this.props\n    return (\n      <Mutation mutation={delete_rental} variables={{id:rentalId}} >\n          {postMutation =>\n            <a  style={{margin:3}}\n              onClick={(event)=>{\n                event.preventDefault();\n                //console.log(user)\n                postMutation().then((result)=>{\n                  //this.props.history.goBack();\n                  //console.log(result)\n                  if (result.data.deleteRental.statut_code==1){\n                      alert('La location a bien été supprimée.', 'success')\n                      Router.push(\"/rentals/list\");\n                  }\n                })\n              }}\n                  className=\"btn btn-danger btn-sm\" >\n                  <i className=\"fa fa-trash\" style={{color:'white'}}></i>\n             </a>\n          }\n      </Mutation>\n\n    )\n  }\n}\n\nexport default withData(withRouter(DeleteButton))\n"]},"metadata":{},"sourceType":"module"}
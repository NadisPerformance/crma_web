{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport React from 'react';\nimport LoginLayout from '../../components/LoginLayout';\nimport { signup_user } from '../../components/user/queries';\nimport { Mutation } from 'react-apollo';\nimport withData from '../../lib/withData';\nimport { Form } from 'react-bootstrap';\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nom: \"\",\n      prenom: \"\",\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  render() {\n    const {\n      nom,\n      prenom,\n      email,\n      password\n    } = this.state;\n    return __jsx(LoginLayout, null, __jsx(Mutation, {\n      mutation: signup_user,\n      variables: {\n        nom: nom,\n        prenom: prenom,\n        email: email,\n        password: password\n      }\n    }, signupMutation => __jsx(React.Fragment, null, __jsx(\"p\", {\n      class: \"login-box-msg\"\n    }, \"Inscription\"), __jsx(Form, {\n      onSubmit: event => {\n        event.preventDefault();\n        signupMutation().then(result => {\n          let data = result.data.signup;\n\n          if (data.statut_code == 1) {\n            alert(\"bien inscris\"); //localStorage.setItem('user', JSON.stringify(data.user) )\n            //localStorage.setItem('token', data.token )\n            //window.flash('L\\'utilisateur a bien été modifié.', 'success')\n\n            window.location = \"/\";\n          } else alert(\"Veuillez remplir tous les champs!\");\n        });\n      }\n    }, __jsx(\"div\", {\n      class: \"input-group mb-3\"\n    }, __jsx(Form.Control, {\n      type: \"nom\",\n      value: nom,\n      onChange: event => this.setState({\n        nom: event.target.value\n      }),\n      placeholder: \"nom\"\n    }), __jsx(\"div\", {\n      class: \"input-group-append\"\n    }, __jsx(\"div\", {\n      class: \"input-group-text\"\n    }))), __jsx(\"div\", {\n      class: \"input-group mb-3\"\n    }, __jsx(Form.Control, {\n      type: \"prenom\",\n      value: nom,\n      onChange: event => this.setState({\n        nom: event.target.value\n      }),\n      placeholder: \"pr\\xE9nom\"\n    }), __jsx(\"div\", {\n      class: \"input-group-append\"\n    }, __jsx(\"div\", {\n      class: \"input-group-text\"\n    }))), __jsx(\"div\", {\n      class: \"input-group mb-3\"\n    }, __jsx(Form.Control, {\n      type: \"email\",\n      value: email,\n      onChange: event => this.setState({\n        email: event.target.value\n      }),\n      placeholder: \"Addresse email\"\n    }), __jsx(\"div\", {\n      class: \"input-group-append\"\n    }, __jsx(\"div\", {\n      class: \"input-group-text\"\n    }, __jsx(\"span\", {\n      class: \"fas fa-envelope\"\n    })))), __jsx(\"div\", {\n      class: \"input-group mb-3\"\n    }, __jsx(Form.Control, {\n      value: password,\n      type: \"password\",\n      onChange: event => this.setState({\n        password: event.target.value\n      }),\n      placeholder: \"Mot de passe\"\n    }), __jsx(\"div\", {\n      class: \"input-group-append\"\n    }, __jsx(\"div\", {\n      class: \"input-group-text\"\n    }, __jsx(\"span\", {\n      class: \"fas fa-lock\"\n    })))), __jsx(\"div\", {\n      class: \"row\"\n    }, __jsx(\"div\", {\n      class: \"col-6\"\n    }), __jsx(\"div\", {\n      class: \"col-6\"\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-primary btn-block\"\n    }, \"S'inscrire\")))), __jsx(\"p\", {\n      class: \"mb-1\"\n    }, __jsx(Link, {\n      href: \"/users/login\"\n    }, \"Avez-vous d\\xE9ja un compte ?\")))));\n  }\n\n}\n\nexport default withData(Signup);","map":null,"metadata":{},"sourceType":"module"}
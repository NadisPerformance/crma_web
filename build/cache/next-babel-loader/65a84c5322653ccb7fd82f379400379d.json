{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport React from 'react';\nimport LoginLayout from '../../components/LoginLayout';\nimport { login_user } from '../../components/user/queries';\nimport { Mutation } from 'react-apollo';\nimport withData from '../../lib/withData';\nimport { Form } from 'react-bootstrap';\n\nvar ChangePassword = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChangePassword, _React$Component);\n\n  var _super = _createSuper(ChangePassword);\n\n  function ChangePassword(props) {\n    var _this;\n\n    _classCallCheck(this, ChangePassword);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      id: 5,\n      password: \"\",\n      password_confirm: \"\",\n      recover_code: \"ggttrr\"\n    };\n    return _this;\n  }\n\n  _createClass(ChangePassword, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          id = _this$state.id,\n          password = _this$state.password,\n          password_confirm = _this$state.password_confirm,\n          recover_code = _this$state.recover_code;\n      return __jsx(LoginLayout, null, __jsx(Mutation, {\n        mutation: login_user,\n        variables: {\n          id: id,\n          new_password: password,\n          recover_code: recover_code\n        }\n      }, function (changePasswordMutation) {\n        return __jsx(React.Fragment, null, __jsx(\"p\", {\n          \"class\": \"login-box-msg\"\n        }, \"Veuillez saisir un nouveau mot de passe\"), __jsx(Form, {\n          onSubmit: function onSubmit(event) {\n            event.preventDefault();\n            changePasswordMutation().then(function (result) {\n              var data = result.data.recoverPassword;\n\n              if (data.statut_code == 1) {\n                alert(\"vous etes connecté\"); //localStorage.setItem('user', JSON.stringify(data.user) )\n                //localStorage.setItem('token', data.token )\n                //window.flash('L\\'utilisateur a bien été modifié.', 'success')\n\n                window.location = \"/\";\n              } else alert(\"mot de passe incorrect\");\n            });\n          }\n        }, __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          value: password,\n          type: \"password\",\n          onChange: function onChange(event) {\n            return _this2.setState({\n              password: event.target.value\n            });\n          },\n          placeholder: \"Nouveau mot de passe\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }, __jsx(\"span\", {\n          \"class\": \"fas fa-lock\"\n        })))), __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          value: password_confirm,\n          type: \"password\",\n          onChange: function onChange(event) {\n            return _this2.setState({\n              password_confirm: event.target.value\n            });\n          },\n          placeholder: \"Confirmer le mot de passe\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }, __jsx(\"span\", {\n          \"class\": \"fas fa-lock\"\n        })))), __jsx(\"div\", {\n          \"class\": \"row\"\n        }, __jsx(\"div\", {\n          \"class\": \"col-6\"\n        }), __jsx(\"div\", {\n          \"class\": \"col-6\"\n        }, __jsx(\"button\", {\n          type: \"submit\",\n          \"class\": \"btn btn-primary btn-block\"\n        }, \"Valider\")))));\n      }));\n    }\n  }]);\n\n  return ChangePassword;\n}(React.Component);\n\nexport default withData(ChangePassword);","map":null,"metadata":{},"sourceType":"module"}
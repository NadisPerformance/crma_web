{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport React from 'react';\nimport LoginLayout from '../../components/LoginLayout';\nimport { signup_user } from '../../components/user/queries';\nimport { Mutation } from 'react-apollo';\nimport withData from '../../lib/withData';\nimport { Form } from 'react-bootstrap';\n\nvar Signup = /*#__PURE__*/function (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  var _super = _createSuper(Signup);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      nom: \"\",\n      prenom: \"\",\n      email: \"\",\n      password: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          nom = _this$state.nom,\n          prenom = _this$state.prenom,\n          email = _this$state.email,\n          password = _this$state.password;\n      return __jsx(LoginLayout, null, __jsx(Mutation, {\n        mutation: signup_user,\n        variables: {\n          nom: nom,\n          prenom: prenom,\n          email: email,\n          password: password\n        }\n      }, function (signupMutation) {\n        return __jsx(React.Fragment, null, __jsx(\"p\", {\n          \"class\": \"login-box-msg\"\n        }, \"Inscription\"), __jsx(Form, {\n          onSubmit: function onSubmit(event) {\n            event.preventDefault();\n            signupMutation().then(function (result) {\n              var data = result.data.signup;\n\n              if (data.statut_code == 1) {\n                alert(\"bien inscris\"); //localStorage.setItem('user', JSON.stringify(data.user) )\n                //localStorage.setItem('token', data.token )\n                //window.flash('L\\'utilisateur a bien été modifié.', 'success')\n\n                window.location = \"/\";\n              } else alert(\"Veuillez remplir tous les champs!\");\n            });\n          }\n        }, __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          type: \"nom\",\n          value: nom,\n          onChange: function onChange(event) {\n            return _this2.setState({\n              nom: event.target.value\n            });\n          },\n          placeholder: \"nom\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }))), __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          type: \"prenom\",\n          value: nom,\n          onChange: function onChange(event) {\n            return _this2.setState({\n              nom: event.target.value\n            });\n          },\n          placeholder: \"pr\\xE9nom\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }))), __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          type: \"email\",\n          value: email,\n          onChange: function onChange(event) {\n            return _this2.setState({\n              email: event.target.value\n            });\n          },\n          placeholder: \"Addresse email\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }, __jsx(\"span\", {\n          \"class\": \"fas fa-envelope\"\n        })))), __jsx(\"div\", {\n          \"class\": \"input-group mb-3\"\n        }, __jsx(Form.Control, {\n          value: password,\n          type: \"password\",\n          onChange: function onChange(event) {\n            return _this2.setState({\n              password: event.target.value\n            });\n          },\n          placeholder: \"Mot de passe\"\n        }), __jsx(\"div\", {\n          \"class\": \"input-group-append\"\n        }, __jsx(\"div\", {\n          \"class\": \"input-group-text\"\n        }, __jsx(\"span\", {\n          \"class\": \"fas fa-lock\"\n        })))), __jsx(\"div\", {\n          \"class\": \"row\"\n        }, __jsx(\"div\", {\n          \"class\": \"col-6\"\n        }), __jsx(\"div\", {\n          \"class\": \"col-6\"\n        }, __jsx(\"button\", {\n          type: \"submit\",\n          \"class\": \"btn btn-primary btn-block\"\n        }, \"S'inscrire\")))), __jsx(\"p\", {\n          \"class\": \"mb-1\"\n        }, __jsx(Link, {\n          href: \"/users/login\"\n        }, \"Avez-vous d\\xE9ja un compte ?\")));\n      }));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default withData(Signup);","map":null,"metadata":{},"sourceType":"module"}